(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c1381ec"],{1567:function(e,t,a){},"7f74":function(e,t,a){},"85df":function(e,t,a){"use strict";var s=a("7f74"),i=a.n(s);i.a},e04b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-page",style:"min-height: "+e.pageMinHeight+"px"},[a("div",{staticStyle:{position:"relative",top:"70px"}},[a("oui-line",{style:{position:"absolute",left:e.lineOffset},attrs:{length:e.lineLength,active:""}}),a("oui-line",{style:{position:"absolute",right:e.lineOffset},attrs:{length:e.lineLength,active:"",disconnect:!e.wanIsUp}})],1),a("div",{staticClass:"oui-home-tabs"},[a("div",[a("div",{staticClass:"tab-title",staticStyle:{display:"inline"},on:{click:function(t){e.tab="router"}}},[a("img",{attrs:{src:"/icons/devices.png"}})]),a("div",{staticClass:"tab-title",staticStyle:{display:"inline"},on:{click:function(t){e.tab="router"}}},[a("img",{attrs:{src:"/icons/router.png"}})]),a("div",{staticClass:"tab-title",staticStyle:{display:"inline"},on:{click:function(t){e.tab="router"}}},[a("img",{attrs:{src:"/icons/internet.png"}})])]),a("div",{staticStyle:{clear:"both"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"router"===e.tab,expression:"tab === 'router'"}]},[a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("oui-dashboard",{attrs:{percent:e.cpuPercentage,label:e.$t("CPU usage")}}),a("oui-dashboard",{attrs:{percent:e.memPercentage,label:e.$t("Memory usage")},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.memMessage))]},proxy:!0}])}),a("oui-dashboard",{attrs:{percent:e.storagePercentage,label:e.$t("Storage")},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.diskMessage))]},proxy:!0}])})],1),a("a-descriptions",{staticStyle:{"text-align":"left","margin-top":"20px"},attrs:{title:e.$t("System information"),column:1,bordered:""}},e._l(e.sysinfo,(function(t){return a("a-descriptions-item",{key:t[0],attrs:{label:t[0]}},[e._v(e._s(t[1]))])})),1)],1)])])])},i=[],n=(a("99af"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("159b"),a("ddb0"),a("5530")),r=a("3835"),o=(a("96cf"),a("1da1")),c=a("5880"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oui-line",style:{backgroundColor:e.color,height:e.width+"px",width:e.length}},[e.disconnect?a("img",{style:{marginTop:e.width/2-20+"px"},attrs:{src:"/icons/error.png"}}):e.active?a("div",{staticClass:"oui-line-active",style:{height:e.width+"px"}}):e._e()])},l=[],u={props:{color:{type:String,default:"#56E67E"},width:{type:Number,default:8},length:{type:String,default:"100%"},disconnect:Boolean,active:Boolean}},m=u,f=(a("85df"),a("0c7c")),p=Object(f["a"])(m,d,l,!1,null,null,null),h=p.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oui-dashboard"},[a("a-progress",{staticStyle:{display:"block"},attrs:{percent:e.percent,"stroke-color":e.color,type:"dashboard"},scopedSlots:e._u([{key:"format",fn:function(){return[a("h2",{style:{color:e.color}},[e._v(e._s(e.percent)+"%")]),a("h4",[e._v(e._s(e.label))])]},proxy:!0}])}),e._t("desc")],2)},g=[],y={name:"OuiDashboard",props:{percent:Number,label:String},computed:{color:function(){return this.percent<60?"#2d8cf0":this.percent<80?"#ff9900":"#ed4014"}}},P=y,A=(a("f9c3"),Object(f["a"])(P,v,g,!1,null,null,null)),I=A.exports,x=a("79fa"),C={messages:{CN:{"Terminal devices":"终端设备","CPU usage":"CPU使用率","Memory usage":"内存使用率",Storage:"存储","System information":"系统信息",Model:"主机型号",Architecture:"架构","Kernel Version":"内核版本","Firmware Version":"固件版本","Local Time":"本地时间","Online devices":"在线设备","Active DHCP Leases":"已分配的DHCP租约","Active DHCPv6 Leases":"已分配的DHCPv6租约","Associated Stations":"已连接的WiFi设备","IPv4-Address":"IPv4-地址","MAC-Address":"MAC-地址","RX Rate":"接收速率","TX Rate":"发送速率","Leasetime remaining":"剩余租期",expired:"已过期",Host:"主机","IPv6-Address":"IPv6-地址",Signal:"信号",Noise:"噪声","IP Address":"IP地址",Gateway:"网关"},HK:{"Terminal devices":"終端設備","CPU usage":"CPU使用率","Memory usage":"內存使用率",Storage:"存儲","System information":"系統信息",Model:"主機型號",Architecture:"架構","Kernel Version":"內核版本","Firmware Version":"固件版本","Local Time":"本地時間","Online devices":"在線設備","Active DHCP Leases":"已分配的DHCP租約","Active DHCPv6 Leases":"已分配的DHCPv6租約","Associated Stations":"已連接的WiFi設備","IPv4-Address":"IPv4-地址","MAC-Address":"MAC-地址","RX Rate":"接收速率","TX Rate":"發送速率","Leasetime remaining":"剩余租期",expired:"已過期",Host:"主機","IPv6-Address":"IPv6-地址",Signal:"信號",Noise:"噪聲","IP Address":"IP地址",Gateway:"網關"},US:{"Terminal devices":"Terminal devices","CPU usage":"CPU usage","Memory usage":"Memory usage",Storage:"Storage","System information":"System information",Model:"Model",Architecture:"Architecture","Kernel Version":"Kernel Version","Firmware Version":"Firmware Version","Local Time":"Local Time","Online devices":"Online devices","Active DHCP Leases":"Active DHCP Leases","Active DHCPv6 Leases":"Active DHCPv6 Leases","Associated Stations":"Associated Stations","IPv4-Address":"IPv4-Address","MAC-Address":"MAC-Address","RX Rate":"RX Rate","TX Rate":"TX Rate","Leasetime remaining":"Leasetime remaining",expired:"expired",Host:"Host","IPv6-Address":"IPv6-Address",Signal:"Signal",Noise:"Noise","IP Address":"IP Address",Gateway:"Gateway"},JP:{"Terminal devices":"端末設備","CPU usage":"CPU使用率","Memory usage":"メモリ使用率",Storage:"メモリー","System information":"システム情報",Model:"ホスト・モデル",Architecture:"アーキテクチャ","Kernel Version":"カーネル版","Firmware Version":"ファームウェア・バージョン","Local Time":"ローカル・タイム","Online devices":"オンライン機器","Active DHCP Leases":"割り当てられたDHCPリース契約","Active DHCPv6 Leases":"割り当てられたDHCPv6リース契約書","Associated Stations":"接続されているWiFi機器","IPv4-Address":"IPv4アドレス","MAC-Address":"MACアドレス","RX Rate":"受信レート","TX Rate":"送信レート","Leasetime remaining":"残余リース期間",expired:"期限切れ",Host:"本体","IPv6-Address":"IPv6アドレス",Signal:"信号",Noise:"騒音","IP Address":"IPアドレス",Gateway:"ゲートウェイ"}}},b=Object(x["c"])(C),S=a("dde5"),w=a("85e8"),M=a("769a"),$={name:"Home",components:{OuiDashboard:I,OuiLine:h},i18n:b,data:function(){var e=this;return{interval:null,tab:"router",statusLineLength:"26%",sysinfo:[],waninfo:[],wanIsUp:!1,devicesColumns:[{dataIndex:"hostname",title:this.$t("Hostname")},{dataIndex:"ipaddr",title:this.$t("IPv4-Address")},{dataIndex:"macaddr",title:this.$t("MAC-Address")},{dataIndex:"rxrate",title:this.$t("RX Rate")},{dataIndex:"txrate",title:this.$t("TX Rate")}],devices:[],devicesMap:{},leasesColumns:[{dataIndex:"hostname",title:this.$t("Hostname")},{dataIndex:"ipaddr",title:this.$t("IPv4-Address")},{dataIndex:"macaddr",title:this.$t("MAC-Address")},{dataIndex:"leasetime",title:this.$t("Leasetime remaining"),customRender:function(t){return e.leasetime(t)}}],leases:[],leases6Columns:[{dataIndex:"name",title:this.$t("Host")},{dataIndex:"ip6addr",title:this.$t("IPv6-Address")},{dataIndex:"duid",title:"DUID"},{dataIndex:"leasetime",title:this.$t("Leasetime remaining"),customRender:function(t){return e.leasetime(t)}}],leases6:[],assoclistColumns:[{dataIndex:"mac",title:this.$t("MAC-Address")},{dataIndex:"host",title:this.$t("Host")},{key:"signal",title:this.$t("Signal")+" / "+this.$t("Noise"),scopedSlots:{customRender:"signal"}},{key:"rx",title:this.$t("RX Rate"),scopedSlots:{customRender:"rx"}},{key:"tx",title:this.$t("TX Rate"),scopedSlots:{customRender:"tx"}}],assoclist:[],lastCPUTime:null,cpuPercentage:0,memPercentage:0,storagePercentage:0,memMessage:"",diskMessage:"",requestStatus:!1}},timers:{update:{time:2e3,autostart:!0,immediate:!0,repeat:!0},updateCpuUsage:{time:1e3,autostart:!0,immediate:!0,repeat:!0}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getSysDesc(),e.getSysInfo(),S["b"].sysConf(M["a"].GET).then((function(t){var a=t.data;e.interval=setInterval((function(){e.getSysInfo()}),Number(a.split("&")[0]))})).catch((function(e){}));case 3:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearInterval(this.interval)},methods:{getSysInfo:function(){var e=this;this.requestStatus||(this.requestStatus=!0,S["a"].getSysInfo(w["a"].STATUS).then((function(t){var a=t.data,s=a.split(";"),i=Object(r["a"])(s,4),n=i[0],o=i[1],c=i[2],d=i[3],l=n.split("&"),u=Object(r["a"])(l,2),m=u[0],f=u[1],p=o.split("&"),h=Object(r["a"])(p,2),v=h[0],g=h[1],y={MB:"MB",GB:"GB"},P=[0,0,0,0];[m,f,v,g].forEach((function(e,t){e.indexOf(y.GB)>-1?P[t]=1024*parseFloat(e.substr(0,e.length-2)):e.indexOf(y.MB)>-1&&(P[t]=parseFloat(e.substr(0,e.length-2)))})),e.memPercentage=Math.ceil(100*P[0]/P[1]),e.storagePercentage=Math.ceil(100*P[2]/P[3]),e.memMessage="".concat(m,"/").concat(f),e.diskMessage="".concat(v,"/").concat(g),e.cpuPercentage=Number(c),e.wanIsUp="up"===d})).catch((function(e){})).finally((function(){e.requestStatus=!1})))},getSysDesc:function(){var e=this;S["a"].getSysInfo(w["a"].INFO).then((function(t){var a=t.data,s=a.split("&"),i=["系统版本","编译日期","GCC版本","网络接口","MAC地址","IP  地址","网关地址","子网掩码","DNS地址"];e.sysinfo=i.map((function(e,t){return[e,s[t]]}))})).catch((function(e){}))},leasetime:function(e){return e<=0?this.$t("expired"):"%t".format(e)},wifirate:function(e,t){var a=e[t+"_rate"],s=e[t+"_mhz"],i="%.1f Mbit/s".format(a/1e3);return i+=", ".concat(s,"MHz"),i},wifiSignalIcon:function(e){var t=-1*(e.noise-e.signal)/5;return t=t<1?1:t<2?2:t<3?3:t<4?4:5,"/icons/signal_".concat(t,".png")},formatWifiRxRate:function(e){return this.wifirate(e,"rx")},formatWifiTxRate:function(e){return this.wifirate(e,"tx")},updateCpuUsage:function(){var e=this;this.$rpc.call("system","cpu_time").then((function(t){if(!e.lastCPUTime)return e.cpuPercentage=0,void(e.lastCPUTime=t);var a=e.lastCPUTime[3],s=t[3],i=0,n=0;e.lastCPUTime.forEach((function(e){i+=e})),t.forEach((function(e){n+=e})),e.cpuPercentage=Math.floor((n-i-(s-a))/(n-i)*100),e.lastCPUTime=t}))},update:function(){var e=this;this.$system.getInfo().then((function(t){var a=t.hostname,s=t.model,i=t.system,n=t.release,r=t.kernel,o=t.localtime,c=t.uptime,d=t.memory;e.sysinfo=[[e.$t("Hostname"),a],[e.$t("Model"),s],[e.$t("Architecture"),i],[e.$t("Firmware Version"),n.revision],[e.$t("Kernel Version"),r],[e.$t("Local Time"),new Date(1e3*o).toString()],[e.$t("Uptime"),"%t".format(c)]],e.memPercentage=Math.floor((d.total-d.free)/d.total*100)})),this.$system.getDiskInfo().then((function(t){var a=t.root;e.storagePercentage=Math.floor(a.used/a.total*100)})),this.$network.load().then((function(){var t=e.$network.getInterface("wan");if(!t)return e.waninfo=[],void(e.wanIsUp=!1);e.waninfo=[[e.$t("IP Address"),t.getIPv4Addrs().join(", ")],[e.$t("Gateway"),t.getIPv4Gateway()],["DNS",t.getDNSAddrs().join(", ")]],e.wanIsUp=t.isUp()})),this.$rpc.call("network","dhcp_leases").then((function(t){var a={};e.leases=t.leases.map((function(e){return e.key=e.ipaddr,e})),e.leases.forEach((function(e){a[e.macaddr]={hostname:e.hostname,ipaddr:e.ipaddr}})),e.$rpc.call("network","bwm").then((function(t){e.devices=t.entries.map((function(t){var s=a[t.macaddr];t=Object(n["a"])(Object(n["a"])({},t),{},{txrate:0,rxrate:0});var i=e.devicesMap[t.macaddr];return i&&(t.txrate="%mB/s".format((t.tx-i.tx)/2),t.rxrate="%mB/s".format((t.rx-i.rx)/2)),e.devicesMap[t.macaddr]={tx:t.tx,rx:t.rx},s&&(t.hostname=s.hostname),t.key=t.macaddr,t}))})),e.$wireless.getAssoclist().then((function(t){e.assoclist=t.map((function(e){var t=a[e.mac.toLowerCase()];return t&&(e.host="".concat(t.hostname," (").concat(t.ipaddr,")")),e.key=e.mac,e}))}))})),this.$rpc.call("network","dhcp6_leases").then((function(t){e.leases6=t.leases.map((function(e){return e.key=e.ipaddr,e}))}))}},computed:Object(n["a"])(Object(n["a"])({},Object(c["mapState"])("setting",["pageMinHeight"])),{},{lineLength:function(){return"calc(100% / 3 - 160px)"},lineOffset:function(){return"calc(100% / 6 + 66px)"}})},k=$,H=(a("f80c"),Object(f["a"])(k,s,i,!1,null,"50598b97",null)),R=H.exports;t["default"]=R},f80c:function(e,t,a){"use strict";var s=a("fe90"),i=a.n(s);i.a},f9c3:function(e,t,a){"use strict";var s=a("1567"),i=a.n(s);i.a},fe90:function(e,t,a){}}]);